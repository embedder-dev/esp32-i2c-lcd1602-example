diff --git a/CMakeLists.txt b/CMakeLists.txt
index 40a2846..4a8123b 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -1,6 +1,5 @@
-set(COMPONENT_ADD_INCLUDEDIRS include)
-set(COMPONENT_SRCDIRS ".")
-set(COMPONENT_REQUIRES "driver")
-set(COMPONENT_PRIV_REQUIRES "esp32-smbus")
-register_component()
-
+idf_component_register(
+    SRCS "i2c-lcd1602.c"  # list your .c files
+    INCLUDE_DIRS "include"
+    REQUIRES driver esp32-smbus
+)
